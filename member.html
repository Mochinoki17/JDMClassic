<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Member Area - JDM Classic Showroom</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
  <div id="loginModal" class="modal-overlay">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Welcome to JDM Classic</h2>
        <p>Please login to continue</p>
      </div>
      <form class="auth-form" id="loginForm">
        <input type="email" placeholder="Email Address" required>
        <input type="password" placeholder="Password" required>
        <button type="submit" class="btn-primary">Login</button>
        <p class="auth-link">Don't have an account? <a href="signup.html" id="showSignup">Sign up here</a></p>
      </form>
    </div>
  </div>

  <header class="navbar">
      <div class="logo" onclick="window.location.href='index.html'" style="cursor: pointer;">JDM ‚Ä¢ Classic</div>
      <nav>
          <a href="purchase.html">Shop</a>
          <a href="inventory.html">Inventory</a>
          <a href="services.html">Services</a>
          <a href="about.html">About</a>
      </nav>
      <div class="nav-right">
          <div class="nav-logos">
              <!-- Shopping Cart -->
              <a href="cart.html" class="nav-logo cart" title="Shopping Cart">
                  üõí <span class="cart-count" id="cartCount">0</span>
              </a>
              <!-- Contact -->
              <a href="contact.html" class="nav-logo contact" title="Contact">üìû</a>
              <!-- Dashboard -->
              <a href="member.html" class="nav-logo dashboard" title="Dashboard">üìä</a>
              <!-- Profile -->
              <a href="user-profile.html" class="nav-logo profile" title="My Profile">üë§</a>
          </div>
          <div class="account-section">
              <div class="user-greeting" id="userGreeting" style="display: none;"></div>
          </div>
      </div>
  </header>

  <section class="page-header">
    <h1>Member Dashboard</h1>
    <p id="welcomeMessage">Welcome back, JDM enthusiast!</p>
  </section>

  <section class="content">
    <div class="member-features">
      <div class="feature-card">
        <h3>Purchase History</h3>
        <p>View your JDM purchases and orders</p>
        <a href="purchase.html#purchaseHistory" class="btn-secondary">View Purchases</a>
      </div>
      <div class="feature-card">
        <h3>Saved Vehicles</h3>
        <p>View your favorite JDM classics</p>
        <a href="inventory.html" class="btn-secondary">View Saved</a>
      </div>
      <div class="feature-card">
        <h3>Service Requests</h3>
        <p>Track your restoration projects</p>
        <a href="services.html" class="btn-secondary">View Services</a>
      </div>
      <div class="feature-card">
        <h3>Account Settings</h3>
        <p>Manage your profile and preferences</p>
        <a href="user-profile.html" class="btn-secondary">Manage Account</a>
      </div>
    </div>

    <!-- Quick Access to Recent Purchases -->
    <div class="purchase-history" id="recentPurchases" style="margin-top: 3rem; display: none;">
      <h2>Recent Purchases</h2>
      <div id="recentPurchasesContainer"></div>
    </div>

  <footer>
    <div class="social-links">
        <a href="https://www.facebook.com/ilex.talisic.3" target="_blank">Facebook</a>
        <a href="https://www.instagram.com/lec_uuu/" target="_blank">Instagram</a>
        <a href="https://github.com/Mochinoki17" target="_blank">GitHub</a>
    </div>
    <p>¬© 2025 JDM Classic Showroom</p>
  </footer>

  <script src="js/json-storage.js"></script>
  <script src="js/app-core.js"></script>
  <script src="js/auth.js"></script>
  <script src="js/login-modal.js"></script>
  <script src="js/member.js"></script>
  <script src="js/cart-system.js"></script>

  <script>
      // Initialize global navigation on ALL pages
      document.addEventListener('DOMContentLoaded', function() {
          if (typeof updateGlobalNavigation === 'function') {
              updateGlobalNavigation();
          }
          
          // Initialize cart system to update navigation count
          if (typeof initCartSystem === 'function') {
              initCartSystem();
          } else if (typeof updateNavigationCartCount === 'function') {
              // If initCartSystem doesn't exist, just update the count
              updateNavigationCartCount();
          }
      });
  </script>

  <!-- GUARANTEED STORAGE FALLBACK -->
  <script>
  // This WILL work no matter what
  window.storage = {
      data: {},
      setItem: function(key, value) {
          console.log('üíæ STORAGE SAVE:', key, value);
          this.data[key] = value;
          return true;
      },
      getItem: function(key) {
          const value = this.data[key] || null;
          console.log('üìñ STORAGE GET:', key, value);
          return value;
      },
      removeItem: function(key) {
          console.log('üóëÔ∏è STORAGE REMOVE:', key);
          delete this.data[key];
      },
      clear: function() {
          console.log('üî• STORAGE CLEAR');
          this.data = {};
      }
  };

  console.log('‚úÖ STORAGE SYSTEM READY - Guaranteed memory storage');
  </script>
</body>
</html>